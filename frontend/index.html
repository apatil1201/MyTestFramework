<!DOCTYPE html>
<html>
<head>
  <title>Fintech Mock App</title>
  <script>
    async function registerUser() {
      const name = document.getElementById("name").value;
      const email = document.getElementById("email").value;
      const accountType = document.getElementById("accountType").value;

      const resp = await fetch("http://localhost:5000/api/users", {
        method: "POST",
        headers: {"Content-Type": "application/json", "Authorization": "Bearer testtoken"},
        body: JSON.stringify({name, email, accountType})
      });

      const data = await resp.json();
      const msgBox = document.getElementById("message");
      if (resp.ok) {
        msgBox.innerText = "User registered successfully!";
      } else {
        msgBox.innerText = data.error || "Something went wrong";
      }
    }

    async function createTransaction() {
      const userId = document.getElementById("txnUserId").value;
      const amount = document.getElementById("amount").value;
      const type = document.getElementById("type").value;

      const resp = await fetch("http://localhost:5000/api/transactions", {
        method: "POST",
        headers: { "Content-Type": "application/json", "Authorization": "Bearer testtoken" },
        body: JSON.stringify({ userId, amount: parseFloat(amount), type })
      });

      const data = await resp.json();
      const msgBox = document.getElementById("txnMessage");
      if (resp.ok) {
        msgBox.innerText = "Transaction created successfully!";
      } else {
        msgBox.innerText = data.error || "Something went wrong";
      }
    }
  </script>
</head>
<body>
  <h1>Fintech Mock UI</h1>

  <h2>User Registration</h2>
  <input id="name" placeholder="Name" />
  <input id="email" placeholder="Email" />
  <select id="accountType">
    <option value="basic">Basic</option>
    <option value="premium">Premium</option>
  </select>
  <button onclick="registerUser()">Register</button>
  <p id="message"></p>

  <h2>Transaction Creation</h2>
  <input id="txnUserId" placeholder="User ID" />
  <input id="amount" placeholder="Amount" />
  <select id="type">
    <option value="transfer">Transfer</option>
    <option value="payment">Payment</option>
    <option value="withdrawal">Withdrawal</option>
  </select>
  <button onclick="createTransaction()">Create Transaction</button>
  <p id="txnMessage"></p>
</body>
</html>